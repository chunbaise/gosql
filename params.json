{
  "name": "Gosql",
  "tagline": "golang mysql dml",
  "body": "# gosql 一个简单的MySql DML语句封装\r\n---\r\n### 列子\r\n### 创建连接,连接池配置与设置表名称\r\n```Go\r\n// 建立连接\r\nm := NewDbMysql(\"127.0.0.1\", 3306, \"root\", \"\", \"test\")\r\n// 设置最大连接数\r\nm.DB.SetMaxOpenConns(30)\r\n// SetMaxIdleConns sets the maximum number of connections in the idle\r\nm.DB.SetMaxIdleConns(10)\r\n// 设置连接自动关闭时间,如果一个连接在100秒内没有任何操作将会被自动关闭掉; 注意:如果一个SQL在100秒内没有执行完毕也会被关闭掉\r\nm.SetAutoCloseTime(100)\r\n// 设置表名\r\nm.SetTableName(\"user\")\r\n```\r\n\r\n### 数据插入\r\n```Go\r\n// 数据插入\r\ndata := map[string]interface{} {\r\n    \"user\": \"张三\",\r\n    \"sex\": \"1\",\r\n    \"age\": 56,\r\n    \"hobbies\": \"乒乓球\",\r\n}\r\nid, e := m.Insert(data);\r\nlog.Println(e)\r\nfmt.Println(id)\r\n```\r\n\r\n### 查询 AND\r\n```Go\r\ncondition := m.NewCondition()\r\ncondition.SetFilter(\"Id\", 3)\r\ncondition.SetFilter(\"sex\", 1)\r\ncondition.SetFilterEx(\"age\", \">\", 20)\r\n\r\n// sql: select * from `user` where `Id` = 3 and `sex` = 1 and `age` > 20\r\nr, e := m.SetCondition(condition).FindAll()\r\n\r\nfmt.Println(e)\r\nfmt.Println(r)\r\nfmt.Println(m.LastSql)\r\n```\r\n\r\n### 查询OR\r\n```Go\r\ncondition := m.NewCondition()\r\nc1 := m.NewCondition().SetFilter(\"Id\", 3)\r\nc2 := m.NewCondition().SetFilter(\"Id\", 4)\r\nc2.SetFilterEx(\"Age\", \">\", 20)\r\n\r\ncondition.SetFilterOr(c1, c2)\r\n// sql: select * from `user` where (`Id` = 3) or (`Id` = 4 and `Age` > 20)\r\nr, e := m.SetCondition(condition).FindAll()\r\nfmt.Println(e)\r\nfmt.Println(r)\r\nfmt.Println(m.LastSql)\r\n```\r\n",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}